<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patient's Sign Up</title>
</head>
<body>
    <h2>Patient's Registration</h2>

<form action="#" method="post">
  <label>Full Name:</label><br>
  <input id="patientName" type="text" name="name" required><br><br>

  <label>Title (Mr/Ms/Mrs):</label><br>
  <input type="text" name="title" id="patientTitle" required><br><br>

  <label>Email:</label><br>
  <input type="email" name="email" id="patientMail" required><br><br>

  <label>Phone Number:</label><br>
  <input type="number" name="number" id="patientNumber" required><br><br>

  <label>Illness:</label><br>
  <input type="text" name="illness" id="patientIllness" required><br><br>

  <!--For textarea-->
  <p>Please describe your illness</p>
  <textarea name="Illness" id="illness" rows="10" cols="20" 
  placeholder="Enter description here" required></textarea><br><br>
  
  <!--For Radio button-->
  <p>Whose service do you require</p>
  <input type="radio" id="" name="professional">
  <label for="Doctor">Doctor</label><br>
  <input type="radio" id="" name="professional">
  <label for="Consultant">Consultant</label>
  <br><br>
   <label>Password:</label><br>
  <input type="password" name="password" required><br><br>

  <button  onclick="Submitit()">Register</button>
</form>
<div id="output"></div>
<script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.0/dist/JsBarcode.all.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script>
    
    function encrypt() {
    const patientName =document.getElementById('patientName').value
    const patientTitle=document.getElementById('patientTitle').value
    const patientMail =document.getElementById('patientMail').value
    const patientNumber=document.getElementById('patientNumber').value
    const patientIllness =document.getElementById('patientIllness').value
    const illness=document.getElementById('illness').value
    const text=`Name: ${patientTitle} ${patientName} \n Mail: ${patientMail} \n  Phone: ${patientNumber} \n Illness: ${patientIllness}`
    const password = "abdullahiMaxwizard";//Password need to be saved
    const output = document.getElementById("output");
    encryptedData=''
    var characters=text.split('')
    var Reversed=text.split('').reverse()
    characters.map((e,index)=>encryptedData+=`${Reversed[index]}${e}`)
    output.textContent=encryptedData
    console.log(encryptedData)
    return encryptedData
}




function decrypted(encryptedData){
    let decryptedData=''
    var characters=encryptedData.split('')
    for (let i = 0; i < characters.length/2; i++) {
    decryptedData+=characters[1+2*i]}
    return decryptedData
}

function encrypt2(text){
    encryptedData=''
    var characters=text.split('')
    var Reversed=text.split('').reverse()
    characters.map((e,index)=>encryptedData+=`${Reversed[index]}${e}`)
   return encryptedData
}


function generateQRCode(data) {
    const qrContainer = document.createElement('div');
    new QRCode(qrContainer, {
        text:data,
        width: 100 * 3,
        height: 100 * 3,
    });
    document.getElementById('output').appendChild(qrContainer);
}

function Submitit(){
   
    let output1=encrypt()
    generateQRCode(output1)

}
/* -------------------------------------------
    DOWNLOAD FUNCTION
-------------------------------------------- */
function downloadBarcode() {
    const barcodeDiv = document.getElementById("barcode");
    const img = barcodeDiv.querySelector("img");
    let imageURL;
    if (img) {
        imageURL = img.src;
    } 
    else {
        alert("No QR found to download!");
        return;
    }

    const link = document.createElement("a");
    link.href = imageURL;
    link.download = "barcode.png";
    link.click();
}

</script>

</body>
</html>