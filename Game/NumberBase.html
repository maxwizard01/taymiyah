<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Number Base Quiz (CBT)</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg,#1f4037,#99f2c8);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
}
.card {
    background: #fff;
    max-width: 720px;
    width: 100%;
    padding: 25px;
    border-radius: 16px;
    text-align: center;
}
h2 { margin-top: 0; }

select {
    padding: 8px;
    margin-bottom: 10px;
    border-radius: 6px;
}

#question {
    font-size: 1.3rem;
    margin: 15px 0;
}

.options {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(180px,1fr));
    gap: 10px;
}

button {
    padding: 12px;
    background: #1f4037;
    color: #fff;
    border: none;
    border-radius: 8px;
    cursor: pointer;
}
button:hover {
    background: #145a32;
}

#feedback { margin-top: 10px; font-weight: bold; }
.correct { color: green; }
.wrong { color: red; }

#steps {
    margin-top: 15px;
    background: #f4f4f4;
    padding: 10px;
    display: none;
    text-align: left;
}

#score {
    margin-top: 10px;
    font-weight: bold;
}
</style>
</head>

<body>

<div class="card">
<h2>üî¢ Number Base Quiz</h2>

<select id="mode" onchange="generateQuestion()">
    <option value="0">All Patterns (Random)</option>
    <option value="1">Base 2 ‚Üí Base 10</option>
    <option value="2">Base 10 ‚Üí Base 2</option>
    <option value="3">Base 10 ‚Üí Base (3‚Äì9)</option>
    <option value="4">Base (3‚Äì9) ‚Üí Base 10</option>
    <option value="5">Binary Addition / Subtraction</option>
    <option value="6">Binary Multiplication</option>
</select>

<div id="score">Score: 0 / 0 (0%)</div>

<p id="question"></p>
<div class="options" id="options"></div>
<p id="feedback"></p>
<div id="steps"></div>
</div>

<script>
let correctAnswer="";
let attempts=0, correct=0;
let lock=false;

function rand(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }
function toBase(n,b){ return n.toString(b); }

function updateScore(){
    let percent = attempts ? Math.round(correct/attempts*100) : 0;
    document.getElementById("score").textContent =
        `Score: ${correct} / ${attempts} (${percent}%)`;
}

function generateQuestion(){
    lock=false;
    document.getElementById("feedback").textContent="";
    document.getElementById("steps").style.display="none";

    let mode = Number(document.getElementById("mode").value);
    if(mode===0) mode = rand(1,6); // RANDOM MODE

    let q="", s="", a="";

    /* 1. Base 2 ‚Üí Base 10 */
    if(mode===1){
        let n=rand(8,300);
        let b=toBase(n,2);
        q=`Convert ${b}‚ÇÇ to base 10`;
        a=n.toString();
        s=`${b}‚ÇÇ = Œ£(d √ó 2‚Åø)<br>= ${a}‚ÇÅ‚ÇÄ`;
    }

    /* 2. Base 10 ‚Üí Base 2 */
    if(mode===2){
        let n=rand(10,550);
        a=toBase(n,2);
        q=`Convert ${n}‚ÇÅ‚ÇÄ to base 2`;
        let temp=n, steps="";
        while(temp>0){
            steps+=`${temp} √∑ 2 = ${Math.floor(temp/2)} r ${temp%2}<br>`;
            temp=Math.floor(temp/2);
        }
        s=steps+`<b>Answer:</b> ${a}‚ÇÇ`;
    }

    /* 3. Base 10 ‚Üí Base (3‚Äì9) */
    if(mode===3){
        let base=rand(3,9), n=rand(15,70);
        a=toBase(n,base);
        q=`Convert ${n}‚ÇÅ‚ÇÄ to base ${base}`;
        let temp=n, steps="";
        while(temp>0){
            steps+=`${temp} √∑ ${base} = ${Math.floor(temp/base)} r ${temp%base}<br>`;
            temp=Math.floor(temp/base);
        }
        s=steps+`<b>Answer:</b> ${a}<sub>${base}</sub>`;
    }

    /* 4. Base n ‚Üí Base 10 */
    if(mode===4){
        let base=rand(3,9);
        let n=rand(15,60);
        let rep=toBase(n,base);
        q=`Convert ${rep}<sub>${base}</sub> to base 10`;
        let exp="";
        rep.split("").reverse().forEach((d,i)=>{
            exp+=`${d}√ó${base}<sup>${i}</sup> + `;
        });
        s=exp.slice(0,-3)+` = ${n}`;
        a=n.toString();
    }

    /* 5. Binary addition/subtraction */
    if(mode===5){
        let x=rand(5,60), y=rand(3,x);
        let bx=toBase(x,2), by=toBase(y,2);
        if(Math.random()<0.5){
            q=`Add ${bx}‚ÇÇ + ${by}‚ÇÇ`;
            a=toBase(x+y,2);
            s=`${bx}<br>+ ${by}<br>= ${a}`;
        }else{
            q=`Subtract ${by}‚ÇÇ from ${bx}‚ÇÇ`;
            a=toBase(x-y,2);
            s=`${bx}<br>‚àí ${by}<br>= ${a}`;
        }
    }

    /* 6. Binary multiplication */
    if(mode===6){
        let x=rand(3,14), y=rand(2,5);
        let bx=toBase(x,2), by=toBase(y,2);
        q=`Multiply ${bx}‚ÇÇ √ó ${by}‚ÇÇ`;
        a=toBase(x*y,2);
        s=`${bx} √ó ${by}<br>= ${a}`;
    }

    correctAnswer=a;
    document.getElementById("question").innerHTML=q;

    let opts=new Set([a]);
    while(opts.size<4) opts.add(toBase(rand(1,70),rand(2,9)));

    document.getElementById("options").innerHTML=
        [...opts].sort(()=>Math.random()-0.5)
        .map(o=>`<button onclick="check('${o}',\`${s}\`)">${o}</button>`).join("");
}

function check(choice,steps){
    if(lock) return;
    lock=true;

    attempts++;
    let f=document.getElementById("feedback");
    let st=document.getElementById("steps");

    if(choice===correctAnswer){
        correct++;
        f.textContent="‚úÖ Correct!";
        f.className="correct";
    }else{
        f.textContent="‚ùå Wrong";
        f.className="wrong";
    }

    updateScore();
    st.innerHTML=steps;
    st.style.display="block";

    // AUTO NEXT QUESTION
    setTimeout(generateQuestion, 3000);
}

generateQuestion();
</script>

</body>
</html>
