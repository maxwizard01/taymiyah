<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quadratic Equation Quiz</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg,#42275a,#734b6d);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
}

.card {
    background: #fff;
    max-width: 540px;
    width: 100%;
    padding: 25px;
    border-radius: 15px;
    text-align: center;
}

h2 { margin-top: 0; }

.status {
    display: flex;
    justify-content: space-between;
    font-weight: bold;
    margin-bottom: 10px;
}

#question {
    font-size: 1.6rem;
    margin: 20px 0;
}

.options {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(120px,1fr));
    gap: 10px;
}

button {
    padding: 12px;
    border: none;
    background: #42275a;
    color: #fff;
    border-radius: 8px;
    cursor: pointer;
}

button:hover {
    background: #2f1b3f;
}

#feedback {
    margin-top: 15px;
    font-weight: bold;
}

.correct { color: green; }
.wrong { color: red; }

#steps {
    margin-top: 15px;
    background: #f4f4f4;
    padding: 10px;
    display: none;
}
</style>
</head>

<body>

<div class="card">
<h2>üìò Solve the Quadratic Equation</h2>

<div class="status">
    <span>‚è± Time: <span id="time">20</span>s</span>
    <span>‚≠ê Score: <span id="score">0</span></span>
    <span>üèÜ High: <span id="high">0</span></span>
</div>

<p id="question"></p>
<div class="options" id="options"></div>
<p id="feedback"></p>
<div id="steps"></div>
</div>
<audio id="correctSound" src="correct.mp3"></audio>
<audio id="gameOverSound" src="wrong.mp3"></audio>

<script>
    const correctSound = document.getElementById("correctSound");
const gameOverSound = document.getElementById("gameOverSound");
let correctRoots = [];
let score = 0;
let highScore = localStorage.getItem("quadHigh") || 0;
let time = 300;
let timer;
let lock = false;
let TotalScore=0
document.getElementById("high").textContent = highScore;

function rand(min,max){
    return Math.floor(Math.random()*(max-min+1))+min;
}

/* ================= TIMER ================= */
function startTimer(){
    clearInterval(timer);
    time = 300;
    document.getElementById("time").textContent = time;

    timer = setInterval(()=>{
        time--;
        document.getElementById("time").textContent = time;
        if(time<=0){
            clearInterval(timer);
            autoNext();
        }
    },1000);
}

/* ================= QUESTION ================= */
function generateQuadratic() {
    let r1 = rand(-5,5);
    let r2 = rand(-5,5);
    while(r1===0) r1=rand(-5,5);
    while(r2===0) r2=rand(-5,5);

    let a = rand(1,3);
    let b = -a*(r1+r2);
    let c = a*r1*r2;

    correctRoots = [r1,r2].sort((x,y)=>x-y);

    let eq =
        `${a===1?"":a}x¬≤ ${b<0?"- "+Math.abs(b):"+ "+b}x ` +
        `${c<0?"- "+Math.abs(c):"+ "+c} = 0`;

    let steps = `
        <b>Step 1:</b> ${eq}<br>
        <b>Step 2:</b> Factorize<br>
        <b>Step 3:</b> (${a===1?"":a})(x-${r1})(x-${r2})=0<br>
        <b>Step 4:</b> x=${r1} or x=${r2}
    `;

    return {eq,steps};
}

function generateQuestion(){
    lock=false;
    document.getElementById("feedback").textContent="";
    document.getElementById("steps").style.display="none";

    let q = generateQuadratic();
    document.getElementById("question").textContent = "Solve: " + q.eq;

    let correct = `x = ${correctRoots[0]}, ${correctRoots[1]}`;
    let opts = new Set([correct]);

    while(opts.size<4){
        opts.add(`x = ${rand(-5,5)}, ${rand(-5,5)}`);
    }

    document.getElementById("options").innerHTML =
        [...opts].sort(()=>Math.random()-0.5)
        .map(o=>`<button onclick="check('${o}',\`${q.steps}\`)">${o}</button>`)
        .join("");

    startTimer();
}

/* ================= CHECK ================= */
function check(choice,steps){
    if(lock) return;
    lock=true;
    clearInterval(timer);

    let f=document.getElementById("feedback");
    let s=document.getElementById("steps");
    let correct=`x = ${correctRoots[0]}, ${correctRoots[1]}`;

    if(choice===correct){
        correctSound.play()
        score++;
        f.textContent="‚úÖ Correct!";
        f.className="correct";
        TotalScore++
    }else{gameOverSound.play()
        f.textContent="‚ùå Wrong";
        f.className="wrong";
        TotalScore++
    }

    document.getElementById("score").textContent = `${score}/${TotalScore}`;

    if(score>highScore){
        highScore=score;
        localStorage.setItem("quadHigh",highScore);
        document.getElementById("high").textContent=highScore;
    }

    s.innerHTML=steps;
    s.style.display="block";

    setTimeout(generateQuestion,2500);
}

/* ================= AUTO NEXT ================= */
function autoNext(){
    gameOverSound.play()
    if(lock) return;
    lock=true;
    document.getElementById("feedback").textContent="‚è∞ Time up!";
    document.getElementById("feedback").className="wrong";
    setTimeout(generateQuestion,1500);
    TotalScore++
}

generateQuestion();
</script>

</body>
</html>
