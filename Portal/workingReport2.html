<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ibnu Taemiyyah Model College — Student Report</title>
  <link rel="stylesheet" href="style.css"><style>
    :root{
      --accent:#0b5f84;
      --muted:#6b7280;
      --paper:#fbfbfb;
      --table-header:#083a4a;
      --gold:#d7a24a;
      --soft:#eef6fa;
    }
    * {
    box-sizing: border-box;
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
  }

  body {
    margin: 0;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg);
  }

  .login-card {
    background: #fff;
    border-radius: var(--radius);
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.07);
    width: 100%;
    max-width: 380px;
    padding: 40px 30px;
    animation: fadeIn 0.7s ease;
  }

  @keyframes fadeIn {
    from {opacity: 0; transform: translateY(15px);}
    to {opacity: 1; transform: translateY(0);}
  }

  .school-logo {
    display: flex;
    justify-content: center;
    align-items: center;
    background: rgba(11,95,255,0.1);
    width: 80px;
    height: 80px;
    margin: 0 auto 16px;
    border-radius: 18px;
    font-weight: 700;
    font-size: 1.5rem;
    color: var(--accent);
  }

  .title {
    text-align: center;
    font-size: 1.1rem;
    font-weight: 700;
    margin-bottom: 4px;
    color: var(--text);
  }

  .subtitle {
    text-align: center;
    font-size: 0.9rem;
    color: var(--muted);
    margin-bottom: 24px;
  }

  label {
    display: block;
    margin-bottom: 6px;
    font-weight: 600;
    color: var(--text);
    font-size: 0.9rem;
  }

  input {
    width: 100%;
    padding: 12px;
    border: 1px solid #dce3f5;
    border-radius: var(--radius);
    margin-bottom: 16px;
    font-size: 0.95rem;
    outline: none;
    transition: border-color 0.2s;
  }

  input:focus {
    border-color: var(--accent);
  }

  button {
    width: 100%;
    background: var(--accent);
    color: white;
    border: none;
    padding: 12px;
    border-radius: var(--radius);
    font-weight: 600;
    font-size: 1rem;
    cursor: pointer;
    transition: background 0.2s;
  }

  button:hover {
    background: var(--accent-dark);
  }

  .footer {
    text-align: center;
    margin-top: 18px;
    font-size: 0.85rem;
    color: var(--muted);
  }

  .footer a {
    color: var(--accent);
    text-decoration: none;
    font-weight: 600;
  }

  .error {
    color: #e74c3c;
    font-size: 0.85rem;
    margin-bottom: 10px;
    text-align: center;
  }
    body{font-family: "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      margin:0; background:#f4f7f9;
      color:#12202b;padding:18px;}
  </style>

  <style>
    #dashboardCard{
      margin-top:4vh;
      display: none;
    }
.controls{display: none;}
  
  </style>
</head>
<body>

  <div class="wrap">
  <!-- LOGIN -->
  <div class="card" id="loginCard" class="login-card">  
  <div class="school-logo"><img src="logo2.PNG" height="100" width="100"></div>
  <div class="title">Ibnu Taemiyyah Model College</div>
  <div class="subtitle">Student Login Portal</div>
  <div id="loginForm">
    <div id="errorMsg" class="error" style="display:none;">Invalid name or roll number</div>
    <label for="fullname">Full Name</label>
    <input type="text" id="name" placeholder="Enter full name" required>

    <label for="roll">Roll Number</label>
    <input type="password" id="pwd" placeholder="Enter roll number" required>
    <button  id="loginBtn" onclick="login()">Login</button>
  </div>
  </div>
</div>


  <div class="container" style="" id="dashboardCard">
    <div class="topbar">
      <div class="brand">
        <div class="logo"><img src="Taemiyyah Logo.png" height="100" width="100"></div>
        <div>
          <h1 id="school">Ibnu Taemiyyah Model College</h1>
          <div class="controls" >
            <label for="studentSelect" class="small">Select Student</label>
            <select id="studentSelect"></select>
          </div>
        </div>
      </div>

    </div>

    <div id="reportArea" class="page" role="document">
      <!-- Content injected by JS -->
    </div>
    <button id="downloadPdf" onclick="window.print()">Download PDF</button>

    <footer>
      <div>Designed by Maxwizard</div>
      <div class="small">2025</div>
    </footer>
  </div>
<script src="Exam.js"></script>

<script>
// Fallback sample data (used if data.json cannot be fetched)
  const Term="First"
  const session="2025/2026"
const fallbackData = {
  "school":"Ibnu Taemiyyah Model College",
  "session":"2024/2025",
  "term":"First Term",
  "students":[
    {
      "id":"S001",
      "name":"Abdullahi Titilayo",
      "class":"JSS1",
      "sex":"Male",
      "roll":"221382",
      "present":25,
      "total_mark_obtainable":360,
      "subjects":[
        {"name":"Mathematics","C.A Test":10,"EXAM":20},
        {"name":"English","C.A Test":9,"EXAM":18},
        {"name":"Yoruba","C.A Test":10,"EXAM":10},
        {"name":"Islamic Studies","C.A Test":2,"EXAM":4},
        {"name":"Arabic","C.A Test":12,"EXAM":12},
        {"name":"Quran","C.A Test":10,"EXAM":10},
        {"name":"Civic Education","C.A Test":12,"EXAM":12},
        {"name":"Chemistry","C.A Test":11,"EXAM":19},
        {"name":"Physics","C.A Test":11,"EXAM":19},
        {"name":"Agric Science","C.A Test":11,"EXAM":0},
        {"name":"Biology","C.A Test":19,"EXAM":20},
        {"name":"Economics","C.A Test":8,"EXAM":13}
      ],
      "class_teacher_comments":"He is a very brilliant student — keep it up.",
      "principal_comment":"Good performance; maintain consistency."
    },
    {
      "id":"S002",
      "name":"Aisha Bello",
      "class":"JSS1",
      "sex":"Female",
      "roll":"221383",
      "present":24,
      "total_mark_obtainable":360,
      "subjects":[
        {"name":"Mathematics","C.A Test":14,"EXAM":18},
        {"name":"English","C.A Test":12,"EXAM":16},
        {"name":"Yoruba","C.A Test":9,"EXAM":11},
        {"name":"Islamic Studies","C.A Test":8,"EXAM":10},
        {"name":"Arabic","C.A Test":10,"EXAM":12},
        {"name":"Quran","C.A Test":9,"EXAM":10},
        {"name":"Civic Education","C.A Test":10,"EXAM":12},
        {"name":"Chemistry","C.A Test":13,"EXAM":14},
        {"name":"Physics","C.A Test":12,"EXAM":13},
        {"name":"Agric Science","C.A Test":10,"EXAM":9},
        {"name":"Biology","C.A Test":15,"EXAM":14},
        {"name":"Economics","C.A Test":10,"EXAM":12}
      ],
      "class_teacher_comments":"Shows steady improvement in class.",
      "principal_comment":"Encouraging progress, work on weak areas."
    }
  ]
};

// Utility: calculate total, percentage, grade
function calcTotals(student){
  const subs = student.subjects || [];
  let total = 0;
  subs.forEach(s => {
    s.total = (Number(s["C.A Test"])||0) + (Number(s.EXAM)||0);
    total += s.total;
  });
  student.total_obtained = total;
   student.total_mark_obtainable=subs.length*100
   student.session="2025/2026"
  student.percentage = student.total_mark_obtainable ? (total / student.total_mark_obtainable * 100) : 0;
  // simple grade mapping
  student.session='2025/2026'
  const p = student.percentage;
  if(p >= 70) student.grade = 'A';
  else if(p >= 60) student.grade = 'B';
  else if(p >= 50) student.grade = 'C';
  else if(p >= 40) student.grade = 'D';
  else student.grade = 'E';
  return student;
}

function renderReport(student, meta){
  student = calcTotals(student);
  const el = document.getElementById('reportArea');
  el.innerHTML = '';
  const header = document.createElement('div');
  header.className = 'student-row';
  header.innerHTML = `
    
    <div class="info" class='studentInfo'>
      <div class="meta">
        <div><strong>Student's Name:</strong> ${student.name}</div>
        <div><span><strong>Roll No:</strong> ${student["Roll No"]} </span> <span>
        <strong>Class:</strong> ${student.Summary.Class} </span> &nbsp;<span><strong>Sex:</strong> ${student.Summary.Sex}</span>
        <span><strong>Session: </strong>${session}</span>  <strong> Term: </strong> ${Term}</span>  </div>
      </div>
    </div>
  `;
  el.appendChild(header);

  // table
  const table = document.createElement('table');
  table.innerHTML = `
    <thead><tr><th>Subject</th><th>C
    .A Test</th><th>EXAM</th><th>Total</th><th>Grade</th></tr></thead>
    <tbody>
      ${student.subjects.map(s => `<tr>
        <td>${s.name}</td>
        <td>${s["C.A Test"]}</td>
        <td>${s.EXAM}</td>
        <td><strong>${s.total}</strong></td>
        <td>${(s.total >= 70 ? 'A' : s.total>=60 ? 'B' : s.total>=50 ? 'C' : s.total>=40 ? 'D' : 'E')}</td>
      </tr>`).join('')}
    </tbody>
  `;
  el.appendChild(table);

  // summary
  const summary = document.createElement('div');
  summary.className = 'summary';
  summary.innerHTML = `
    <div class="card">
      <div class="small">Total Mark Obtained</div>
      <div class="big">${student.total_obtained}</div>
      <div class="small" style="margin-top:6px">Out of ${student.total_mark_obtainable}</div>
    </div>
    <div class="card">
      <div class="small">Performance</div>
      <div class="big">${student.percentage.toFixed(2)}%</div>
      <div class="small" style="margin-top:6px;">Grade: <strong>${student.grade}</strong></div>
    </div>
  `;
  el.appendChild(summary);

  // comments
  const comments = document.createElement('div');
  comments.className = 'comments';
  comments.innerHTML = `
    <div class="comment-box"><strong>Class Teacher's Comments</strong><p>${student.class_teacher_comments || ''}</p> <textarea></textarea></div>
    <div class="comment-box"><strong>Principal's Comments</strong><p>${student.principal_comment || ''}</p><textarea></textarea></div>
  `;
  el.appendChild(comments);
}

//Load data.json; fallback to embedded data
async function loadData(){
  try{
    const json = SchoolData
    return json;
  }catch(err){
    console.warn('Could not load data.json, using fallback data.', err);
    return fallbackData;
  }
}
/*
function populateStudentSelect(data){
  const sel = document.getElementById('studentSelect');
  sel.innerHTML = data.students.map((s,idx) => `<option value="${idx}">${s.name}</option>`).join('');
  sel.addEventListener('change', ()=>{
    const student = data.students[sel.value];
    renderReport(student, data);
  });
  // initial render
  if(data.students.length) renderReport(data.students[0], data);
}



*/
function populateStudentSelect(data){
  const sel = document.getElementById('studentSelect');
  sel.innerHTML = data.students.map((s,idx) => `<option value="${idx}">${s.name}</option>`).join('');
  sel.addEventListener('change', ()=>{
    const student = data.students[sel.value];
    renderReport(student, data);
  });
  // initial render
  if(data.students.length) renderReport(data.students[0], data);
}

function login(){
  console.log('Login Clicked')
  let data=SchoolData
  const n = document.getElementById('name').value.trim().toLowerCase();
  const p = document.getElementById('pwd').value.trim();
  if(!n || !p){ alert('Enter name and roll number'); return; }
  const found = (data.students || []).find(s => (s.name||'').toString().trim().toLowerCase() === n && (s['Roll No']||'').toString() === p);
  if(!found){ alert('Invalid name or roll number. Make sure name exactly matches (case-insensitive) and roll number is correct.'); return; }
  //showStudent(found);
  document.getElementById('loginCard').style.display='none';
  document.getElementById('dashboardCard').style.display='block'
  document.getElementById("studentSelect").value =p-1
  const student = data.students[p-1];
  renderReport(student, data);
  //document.getElementById('logoutBtn').onclick =history.back()
}


// Download PDF (uses print to PDF)
document.getElementById('downloadPdf').addEventListener('click', ()=>{
  window.print();
});

//Initialize
(async ()=>{
  const data = await loadData();
  window._loadedData = data;
  populateStudentSelect(data);
})();
;
</script>
</body>
</html>



